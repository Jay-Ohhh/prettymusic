(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["detail"],{"013a":function(t,e,n){"use strict";var i=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"comment-box"},[i("div",{staticClass:"flex-between"},[i("span",[t.userInfo.nickname?i("span",[i("i",{staticClass:"iconfont niceuser"}),t._v(" "+t._s(t.userInfo.nickname)+" ")]):i("span",{staticClass:"login-btn",on:{click:t.toLogin}},[t._v("评论请先登录")])]),""!=t.currentCommentId?i("button",{staticClass:"cancel-comment",on:{click:t.cancelComment}},[t._v("取消回复 ")]):t._e()]),i("div",{staticClass:"comment-form"},[i("div",{staticClass:"avatar"},[t.userInfo.avatarUrl?i("img",{attrs:{src:t.userInfo.avatarUrl,alt:""}}):i("img",{attrs:{src:n("686c"),alt:""}})]),i("div",{staticClass:"comment-area"},[i("textarea",{directives:[{name:"model",rawName:"v-model",value:t.commentContent,expression:"commentContent"}],class:{disabled:!t.loginStatus},attrs:{name:"comment",disabled:!t.loginStatus,placeholder:t.placeholder,maxlength:"1000"},domProps:{value:t.commentContent},on:{input:function(e){e.target.composing||(t.commentContent=e.target.value)}}}),i("span",{staticClass:"rest-tip"},[t._v(t._s(t.restFont)+" / "+t._s(t.fontMaxLength))])])]),i("div",{staticClass:"comment-foot"},[i("button",{directives:[{name:"preventReclick",rawName:"v-preventReclick",value:2e3,expression:"2000"}],staticClass:"comment-btn",attrs:{type:"button"},on:{click:t.commentSubmit}},[t._v("评论")])])])},s=[],a=(n("a9e3"),n("5530")),r=n("5880"),o={data:function(){return{commentContent:""}},props:{currentCommentId:{type:[Number,String]},fontMaxLength:{type:[Number,String],default:1e3},clearText:{type:Boolean,default:!1}},computed:Object(a["a"])(Object(a["a"])({},Object(r["mapGetters"])(["getUserInfo","getLoginStatus"])),{},{restFont:function(){return Number(this.fontMaxLength)-this.commentContent.length},userInfo:function(){return JSON.parse(sessionStorage.getItem("myInfo"))||this.getUserInfo},loginStatus:function(){var t=this;return this.$bus.$on("forceUpdate",(function(){t.$router.go(0)})),!!JSON.parse(sessionStorage.getItem("loginStatus"))||this.getLoginStatus},placeholder:function(){return this.loginStatus?"等你来评论~":"登录后才能评论哦~"}}),watch:{currentCommentId:function(t,e){this.commentContent=""},clearText:function(t){t&&(this.commentContent="")}},methods:{commentSubmit:function(){!1!==this.loginStatus?this.$emit("commentsubmit",this.commentContent):ELEMENT.Message("评论请先登录")},cancelComment:function(){this.$emit("cancelcomment")},toLogin:function(){this.$router.push("/login")}}},c=o,l=(n("67ac"),n("2877")),m=Object(l["a"])(c,i,s,!1,null,"6443e7dc",null);e["a"]=m.exports},"0605":function(t,e,n){"use strict";var i=n("35f6"),s=n.n(i);s.a},"09b3":function(t,e,n){"use strict";var i=n("7ec3"),s=n.n(i);s.a},"1c82":function(t,e,n){"use strict";var i=n("6565"),s=n.n(i);s.a},"35f6":function(t,e,n){},"3c41":function(t,e,n){},5319:function(t,e,n){"use strict";var i=n("d784"),s=n("825a"),a=n("7b0b"),r=n("50c4"),o=n("a691"),c=n("1d80"),l=n("8aa5"),m=n("14c3"),u=Math.max,d=Math.min,f=Math.floor,v=/\$([$&'`]|\d\d?|<[^>]*>)/g,p=/\$([$&'`]|\d\d?)/g,g=function(t){return void 0===t?t:String(t)};i("replace",2,(function(t,e,n,i){var h=i.REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE,C=i.REPLACE_KEEPS_$0,b=h?"$":"$0";return[function(n,i){var s=c(this),a=void 0==n?void 0:n[t];return void 0!==a?a.call(n,s,i):e.call(String(s),n,i)},function(t,i){if(!h&&C||"string"===typeof i&&-1===i.indexOf(b)){var a=n(e,t,this,i);if(a.done)return a.value}var c=s(t),f=String(this),v="function"===typeof i;v||(i=String(i));var p=c.global;if(p){var x=c.unicode;c.lastIndex=0}var w=[];while(1){var y=m(c,f);if(null===y)break;if(w.push(y),!p)break;var I=String(y[0]);""===I&&(c.lastIndex=l(f,r(c.lastIndex),x))}for(var k="",D=0,R=0;R<w.length;R++){y=w[R];for(var A=String(y[0]),L=u(d(o(y.index),f.length),0),T=[],M=1;M<y.length;M++)T.push(g(y[M]));var E=y.groups;if(v){var S=[A].concat(T,L,f);void 0!==E&&S.push(E);var O=String(i.apply(void 0,S))}else O=_(A,f,L,T,E,i);L>=D&&(k+=f.slice(D,L)+O,D=L+A.length)}return k+f.slice(D)}];function _(t,n,i,s,r,o){var c=i+t.length,l=s.length,m=p;return void 0!==r&&(r=a(r),m=v),e.call(o,m,(function(e,a){var o;switch(a.charAt(0)){case"$":return"$";case"&":return t;case"`":return n.slice(0,i);case"'":return n.slice(c);case"<":o=r[a.slice(1,-1)];break;default:var m=+a;if(0===m)return e;if(m>l){var u=f(m/10);return 0===u?e:u<=l?void 0===s[u-1]?a.charAt(1):s[u-1]+a.charAt(1):e}o=s[m-1]}return void 0===o?"":o}))}}))},"58c1":function(t,e,n){},5946:function(t,e,n){"use strict";n.r(e);var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"playlist-detail container"},[n("div",{staticClass:"left shadow"},[n("div",{staticClass:"top"},[n("div",{staticClass:"avatar"},[n("img",{attrs:{src:t.detail.coverImgUrl,alt:""}})]),n("div",{staticClass:"info"},[n("div",{staticClass:"title flex-row"},[n("p",[t._v(t._s(t.detail.name))])]),n("div",{staticClass:"user flex-row"},[n("div",{staticClass:"avatar",on:{click:function(e){return t.toUser(t.creator.userId)}}},[n("img",{attrs:{src:t.creator.avatarUrl,alt:""}})]),n("span",{staticClass:"nickname",on:{click:function(e){return t.toUser(t.creator.userId)}}},[t._v(" "+t._s(t.creator.nickname))]),t.detail.createTime?n("span",{staticClass:"createTime"},[t._v(" "+t._s(t._f("formatDate")(t.detail.createTime,"YYYY-MM-DD"))+" 创建 ")]):t._e()]),t.detail.tags&&t.detail.tags.length>0?n("div",{staticClass:"tag flex-row"},[t._v(" 标签："),t._l(t.detail.tags,(function(e){return n("a",{key:e,on:{click:function(n){return t.toPlayList(e)}}},[t._v(t._s(e))])}))],2):t._e(),n("div",{staticClass:"desc"},[n("p",{staticClass:"ellipsis-two",domProps:{innerHTML:t._s(t.detail.description)}}),t.txtLength(t.detail.description)>50?n("span",{staticClass:"flex-row",on:{click:function(e){return t.openDesc(t.detail.description,t.detail.name)}}},[t._v("全部 "),n("i",{staticClass:"iconfont niceiconfontyoujiantou-copy-copy-copy-copy"})]):t._e()])])]),n("div",{directives:[{name:"loading",rawName:"v-loading",value:t.screenLoading,expression:"screenLoading"}],staticClass:"content"},[n("sheet-song-list",{attrs:{songs:t.songs,"is-person":t.isPerson,subscribed:t.detail.subscribed},on:{collectartist:t.collectArtist}})],1)]),n("div",{staticClass:"right"},[n("div",{staticClass:"like module shadow"},[t._m(0),t.subscribers.length>0?n("ul",t._l(t.subscribers,(function(e){return n("li",{key:e.userId},[n("div",{staticClass:"avatar",on:{click:function(n){return t.toUser(e.userId)}}},[n("img",{attrs:{src:e.avatarUrl,alt:"",title:e.nickname}})])])})),0):n("p",{staticClass:"no-data-text",staticStyle:{"padding-bottom":"10px"}},[t._v(" "+t._s(t.emptyText)+" ")])]),n("div",{staticClass:"related module shadow"},[t._m(1),t.relatedList.length>0?n("ul",t._l(t.relatedList,(function(e){return n("li",{key:e.id,on:{click:function(n){return t.toDetail(e.id)}}},[n("div",{staticClass:"avatar"},[n("img",{attrs:{src:e.coverImgUrl,alt:"",title:e.nickname}})]),n("div",{staticClass:"info"},[n("h2",{staticClass:"ellipsis",attrs:{title:e.name}},[t._v(t._s(e.name))]),n("span",[t._v("By."),n("small",[t._v(t._s(e.creator.nickname))])])])])})),0):n("p",{staticClass:"no-data-text",staticStyle:{"padding-bottom":"10px"}},[t._v(" "+t._s(t.emptyRelated)+" ")])]),n("div",{staticClass:"comment module shadow"},[t._m(2),t.comments.length>0?n("ul",t._l(t.comments,(function(e){return n("li",{key:e.commentId,staticClass:"item"},[n("div",{staticClass:"avatar",on:{click:function(n){return t.toUser(e.user.userId)}}},[n("img",{attrs:{src:e.user.avatarUrl,alt:"",title:e.user.nickname}})]),n("div",{staticClass:"info"},[n("span",{on:{click:function(n){return t.toUser(e.user.userId)}}},[t._v(" "+t._s(e.user.nickname)),n("small",[t._v(" · "+t._s(t._f("formatTimeBefore")(e.time)))])]),n("p",[t._v(t._s(e.content))])])])})),0):n("p",{staticClass:"no-data-text",staticStyle:{"padding-bottom":"10px"}},[t._v(" "+t._s(t.emptyComment)+" ")])])])])},s=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"card-header flex-row"},[n("span",[t._v("喜欢这个歌单的人")])])},function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"card-header flex-row"},[n("span",[t._v("相关推荐")])])},function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"card-header flex-row"},[n("span",[t._v("精彩评论")])])}],a=(n("a4d3"),n("e01a"),n("4160"),n("a15b"),n("d81d"),n("ac1f"),n("5319"),n("159b"),n("96cf"),n("1da1")),r=n("6d75"),o=n("8c9f"),c={name:"playListDetail",data:function(){return{detail:{},creator:{},subscribers:[],relatedList:[],comments:[],songs:[],artistId:"",screenLoading:!1,isPerson:!1,emptyText:"",emptyRelated:"",emptyComment:""}},components:{sheetSongList:o["a"]},computed:{txtLength:function(){return function(t){if(t)return t.length}}},created:function(){this.artistId=this.$route.query.id,this._initialize(this.artistId)},watch:{},methods:{getPlayListDetail:function(t,e){var n=this;return Object(a["a"])(regeneratorRuntime.mark((function i(){var s,a,r;return regeneratorRuntime.wrap((function(i){while(1)switch(i.prev=i.next){case 0:return i.next=2,n.$api.getPlayListDetail(t,e);case 2:s=i.sent,200===s.code&&(null!==s.playlist.description&&(s.playlist.description=s.playlist.description.replace(/(\r\n|\n|\r)/g,"<br />")),n.detail=s.playlist,n.creator=s.playlist.creator,a=s.playlist.trackIds,sessionStorage.getItem("myInfo")&&(r=JSON.parse(sessionStorage.getItem("myInfo")).userId||n.$store.getters.getUserInfo.userId,n.creator.userId===r&&(n.isPerson=!0)),n.getSongDetail(a));case 4:case"end":return i.stop()}}),i)})))()},getSongDetail:function(t){var e=this;return Object(a["a"])(regeneratorRuntime.mark((function n(){var i,s;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return e.screenLoading=!0,i=[],t.forEach((function(t){return i.push(t.id)})),n.prev=3,n.next=6,e.$api.getSongDetail(i.join(","));case 6:s=n.sent,e.songs=e._normalizeSongs(s.songs),e.screenLoading=!1,n.next=14;break;case 11:n.prev=11,n.t0=n["catch"](3),e.screenLoading=!1;case 14:case"end":return n.stop()}}),n,null,[[3,11]])})))()},_normalizeSongs:function(t){var e=t.map((function(t){if(t.id)return Object(r["a"])(t)}));return e},getRelatedPlayList:function(t){var e=this;return Object(a["a"])(regeneratorRuntime.mark((function n(){var i;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,e.$api.getRelatedPlayList(t);case 2:i=n.sent,200===i.code&&(e.relatedList=i.playlists,0===i.playlists.length&&(e.emptyRelated="还没有相关推荐~"));case 4:case"end":return n.stop()}}),n)})))()},getSubscribers:function(t){var e=this;return Object(a["a"])(regeneratorRuntime.mark((function n(){var i,s;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return i={id:t,limit:28,offset:0,timestamp:(new Date).getTime()},n.next=3,e.$api.getSubscribers(i);case 3:s=n.sent,200===s.code&&(e.subscribers=s.subscribers,0===s.subscribers.length&&(e.emptyText="还没有人喜欢~"));case 5:case"end":return n.stop()}}),n)})))()},getSheetComment:function(t){var e=this;return Object(a["a"])(regeneratorRuntime.mark((function n(){var i,s;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return i={id:t,limit:28,offset:0},n.next=3,e.$api.getSheetComment(i);case 3:s=n.sent,200===s.code&&(s.hotComments.length>0?e.comments=s.hotComments:e.comments=s.comments,0===e.comments.length&&(e.emptyComment="等你来评论~"));case 5:case"end":return n.stop()}}),n)})))()},openDesc:function(t,e){ELEMENT.MessageBox.alert(t,e,{closeOnClickModal:!0,customClass:"descBox",showConfirmButton:!1,dangerouslyUseHTMLString:!0}).catch((function(t){}))},collectArtist:function(){var t=this;return Object(a["a"])(regeneratorRuntime.mark((function e(){var n,i,s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!(sessionStorage.getItem("cookie")&&sessionStorage.getItem("token")&&JSON.parse(sessionStorage.getItem("loginStatus")))){e.next=13;break}if(n=t.detail.subscribed?"已取消收藏":"收藏成功",!t.detail.subscribed){e.next=6;break}ELEMENT.MessageBox.confirm("确认取消收藏该歌单","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"info"}).then(Object(a["a"])(regeneratorRuntime.mark((function e(){var i,s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return i=t.detail.subscribed?2:1,e.next=3,t.$api.collectArtist(i,t.artistId);case 3:s=e.sent,200===s.code&&(t.detail.subscribed=!t.detail.subscribed,ELEMENT.Message.success(n),t.getSubscribers(t.artistId));case 5:case"end":return e.stop()}}),e)})))).catch((function(t){})),e.next=11;break;case 6:return i=t.detail.subscribed?2:1,e.next=9,t.$api.collectArtist(i,t.artistId);case 9:s=e.sent,200===s.code&&(t.detail.subscribed=!t.detail.subscribed,ELEMENT.Message.success(n),t.getSubscribers(t.artistId));case 11:e.next=15;break;case 13:ELEMENT.Message("请先登录"),setTimeout((function(){t.$router.push("/login")}),500);case 15:case"end":return e.stop()}}),e)})))()},toPlayList:function(t){this.$router.push({name:"playlist",params:{cate:t}})},toDetail:function(t){this.$router.push({path:"/playlistdetail",query:{id:t}})},toUser:function(t){this.$router.push({path:"/personal",query:{id:t}})},_initialize:function(t){this.getPlayListDetail(t,100),this.getRelatedPlayList(t),this.getSubscribers(t),this.getSheetComment(t)}}},l=c,m=(n("dd11"),n("2877")),u=Object(m["a"])(l,i,s,!1,null,"e348d1c4",null);e["default"]=u.exports},"648c":function(t,e,n){"use strict";var i=n("58c1"),s=n.n(i);s.a},6565:function(t,e,n){},"65e4":function(t,e,n){"use strict";n.r(e);var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"singer-detail"},[n("div",{staticClass:"singer-info"},[n("div",{staticClass:"top"},[n("div",{staticClass:"top-mask"},[n("div",{staticClass:"singer-box flex-column flex-center"},[n("div",{staticClass:"avatar transition"},[n("img",{attrs:{src:t.detail.img1v1Url+"?param=200y200",alt:""}}),n("div",{directives:[{name:"show",rawName:"v-show",value:t.level,expression:"level"}],staticClass:"level flex-center"},[n("i",{class:["iconfont","icon-level",t.level]})])]),n("p",{staticClass:"nickname"},[t._v(" "+t._s(t.detail.name)+" "),n("i",{staticClass:"iconfont",class:t.gender})]),t.followed?t.followed?n("div",{staticClass:"follow flex-center",on:{click:t.followSinger}},[t._v(" 已关注 ")]):n("div",{staticClass:"empty"}):n("div",{staticClass:"follow flex-center",on:{click:t.followSinger}},[n("i",{staticClass:"iconfont niceIcon_add"}),t._v(" 关注TA ")]),n("div",{staticClass:"desc ellipsis-two",domProps:{innerHTML:t._s(t.detail.briefDesc)}}),n("ul",{staticClass:"info flex-center"},[n("li",[n("p",{staticClass:"num"},[t._v(t._s(t.detail.musicSize))]),n("p",{staticClass:"text"},[t._v("单曲数")])]),n("li",[n("p",{staticClass:"num"},[t._v(t._s(t.detail.albumSize))]),n("p",{staticClass:"text"},[t._v("专辑数")])]),n("li",[n("p",{staticClass:"num"},[t._v(t._s(t.detail.mvSize))]),n("p",{staticClass:"text"},[t._v("MV数")])]),n("li",{directives:[{name:"show",rawName:"v-show",value:t.detail.followeds,expression:"detail.followeds"}]},[n("p",{staticClass:"num"},[t._v(t._s(t._f("transNum")(t.detail.followeds,1)))]),n("p",{staticClass:"text"},[t._v("粉丝")])])])])]),n("div",{staticClass:"bottom-trangle"})]),n("div",{staticClass:"bottom container"},[n("ul",{staticClass:"nav flex-center"},t._l(t.navList,(function(e){return n("li",{key:e.index,class:t.active===e.index?"active":"",on:{click:function(n){return t.tabItem(e.index)}}},[t._v(t._s(e.name))])})),0),n("div",{staticClass:"content"},[1===t.active?n("div",{staticClass:"song-box"},[t.songs.length>0?n("song-sheet-list",{attrs:{songs:t.songs,"is-person":t.isPerson}}):t._e()],1):t._e(),2===t.active?n("div",{staticClass:"album"},[t.albums.length>0?n("album-list",{attrs:{albums:t.albums}}):n("pretty-empty",{attrs:{emptyText:t.emptyText}})],1):t._e(),3===t.active?n("div",{staticClass:"mv-box"},[t.mvs.length>0?n("mv-list",{attrs:{mvs:t.mvs}}):n("pretty-empty",{attrs:{emptyText:t.emptyText}})],1):t._e(),4===t.active?n("div",{staticClass:"info-box"},[n("h2",{staticClass:"title"},[t._v(t._s(t.detail.name)+"简介")]),0!==Object.keys(t.singerDesc).length?n("div"):t._e(),n("div",{staticClass:"profile",domProps:{innerHTML:t._s(t.singerDesc.briefDesc)}}),n("div",{staticClass:"introduction"},t._l(t.singerDesc.introduction,(function(e){return n("div",{key:e.ti,staticClass:"item"},[n("h3",{staticClass:"sub-title"},[t._v(t._s(e.ti))]),n("p",{domProps:{innerHTML:t._s(e.txt)}})])})),0),n("pretty-empty",{attrs:{emptyText:t.emptyText}})],1):5===t.active?n("div",{staticClass:"simi-box"},[t.singers.length>0?n("singer-list",{attrs:{singers:t.singers}}):n("pretty-empty",{attrs:{emptyText:t.emptyText}})],1):t._e()])])])])},s=[],a=(n("4160"),n("b0c0"),n("ac1f"),n("5319"),n("159b"),n("96cf"),n("1da1")),r=n("5530"),o=n("8c9f"),c=n("7ed9"),l=n("7cf1"),m=n("88f6"),u=n("b3e4"),d=n("6d75"),f={name:"singerDetail",data:function(){return{singerDetail:{},userDetail:{level:"",followeds:"",gender:""},singerDesc:{},songs:[],albums:[],singers:[],mvs:[],singerId:"",navList:[{name:"作品",index:1},{name:"专辑",index:2},{name:"MV",index:3},{name:"歌手详情",index:4},{name:"相似歌手",index:5}],active:1,limit:20,offset:0,isPerson:!1,followed:!1,emptyText:"哎呀，这里什么都没有~"}},components:{songSheetList:o["a"],albumList:c["a"],mvList:l["a"],singerList:m["a"],prettyEmpty:u["a"]},computed:{detail:function(){return Object(r["a"])(Object(r["a"])({},this.singerDetail),this.userDetail)},gender:function(){return this.detail.gender>0?1===this.detail.gender?"niceCRM_icon_nanxing man":"niceCRM_icon_nvxing woman":""},level:function(){return this.detail.level>0?"nicelevel-"+this.detail.level:""},myId:function(){return sessionStorage.getItem("myInfo")||this.getUserInfo.userId?JSON.parse(sessionStorage.getItem("myInfo")).userId+""||this.getUserInfo.userId:""}},created:function(){this.$route.query.id&&(this.singerId=this.$route.query.id,this._initailize(this.$route.query.id))},methods:{tabItem:function(t){this.active=t},getArtists:function(t){var e=this;return Object(a["a"])(regeneratorRuntime.mark((function n(){var i;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,e.$api.getArtists(t);case 2:i=n.sent,200===i.code&&(e.singerDetail=i.artist,i.artist.accountId&&e.getUserDetail(i.artist.accountId),e.followed=i.artist.followed),e.songs=e._normalizeSongs(i.hotSongs);case 5:case"end":return n.stop()}}),n)})))()},getUserDetail:function(t){var e=this;return Object(a["a"])(regeneratorRuntime.mark((function n(){var i;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,e.$api.getUserDetail(t);case 2:i=n.sent,200===i.code&&(e.userDetail.level=i.level,e.userDetail.followeds=i.profile.followeds,e.userDetail.gender=i.profile.gender);case 4:case"end":return n.stop()}}),n)})))()},getArtistAlbum:function(t){var e=this;return Object(a["a"])(regeneratorRuntime.mark((function n(){var i,s;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return i={id:t,limit:e.limit,offset:e.offset},n.next=3,e.$api.getArtistAlbum(i);case 3:s=n.sent,200===s.code&&(e.albums=s.hotAlbums);case 5:case"end":return n.stop()}}),n)})))()},getArtistMv:function(t){var e=this;return Object(a["a"])(regeneratorRuntime.mark((function n(){var i;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,e.$api.getArtistMv(t);case 2:i=n.sent,200===i.code&&(e.mvs=e._normalizeVideos(i.mvs));case 4:case"end":return n.stop()}}),n)})))()},getArtistDesc:function(t){var e=this;return Object(a["a"])(regeneratorRuntime.mark((function n(){var i;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,e.$api.getArtistDesc(t);case 2:i=n.sent,200===i.code&&i.introduction.length>0&&(i.introduction.forEach((function(t){t.txt=t.txt.replace(/(\r\n|\n|\r)/g,"</ br>")})),e.singerDesc=i);case 4:case"end":return n.stop()}}),n)})))()},getArtistSimi:function(t){var e=this;return Object(a["a"])(regeneratorRuntime.mark((function n(){var i;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,e.$api.getArtistSimi(t);case 2:i=n.sent,200===i.code&&(e.singers=i.artists);case 4:case"end":return n.stop()}}),n)})))()},_normalizeSongs:function(t){var e=[];return t.forEach((function(t){e.push(Object(d["a"])(t))})),e},_normalizeVideos:function(t){var e=[];return t.forEach((function(t){t.id&&e.push({id:t.id,nickName:t.artistName,title:t.name,playCount:t.playCount,duration:t.duration,picUrl:t.imgurl16v9})})),e},followSinger:function(){var t=this;return Object(a["a"])(regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!sessionStorage.getItem("cookie")||!sessionStorage.getItem("token")){e.next=11;break}if(!t.followed){e.next=5;break}ELEMENT.MessageBox.confirm("确认取消收藏歌手","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"info"}).then(Object(a["a"])(regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.$api.followSinger(t.singerId,0);case 2:n=e.sent,200===n.code&&(t.followed=!1);case 4:case"end":return e.stop()}}),e)})))),e.next=9;break;case 5:return e.next=7,t.$api.followSinger(t.singerId,1);case 7:n=e.sent,200===n.code&&(t.followed=!0);case 9:e.next=13;break;case 11:ELEMENT.Message("请先登录"),t.$router.push("/login");case 13:case"end":return e.stop()}}),e)})))()},_initailize:function(t){this.getArtists(t),this.getArtistAlbum(t),this.getArtistMv(t),this.getArtistDesc(t),this.getArtistSimi(t)}}},v=f,p=(n("1c82"),n("2877")),g=Object(p["a"])(v,i,s,!1,null,"af39ee7c",null);e["default"]=g.exports},"67ac":function(t,e,n){"use strict";var i=n("3c41"),s=n.n(i);s.a},"686c":function(t,e){t.exports="data:image/png;base64,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"},"6e2e":function(t,e,n){"use strict";n.r(e);var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"video-detail container"},[n("div",{staticClass:"left shadow"},[n("div",{staticClass:"video-container"},[n("video",{attrs:{src:t.videoUrl,controls:"",controlslist:"nodownload"}})]),n("div",{staticClass:"video-foot"},[n("h2",{staticClass:"title flex-row ellipsis"},[t._v(t._s(t.detail.title))]),n("div",{staticClass:"tag"},t._l(t.detail.videoGroup,(function(e){return n("a",{key:e.id,on:{click:function(n){return t.toVideo(e.id,e.name)}}},[t._v(" "+t._s(e.name)+" ")])})),0),n("p",{staticClass:"flex-row"},[n("span",[t._v("发布："+t._s(t._f("formatDate")(t.detail.publishTime,"YYYY-MM-DD")))]),t.detail.playTime?n("span",[t._v("播放次数："+t._s(t._f("transNum")(t.detail.playTime,1)))]):t._e()]),n("div",{staticClass:"follow flex-row"},[n("div",{staticClass:"box",class:t.videoDetailInfo.isLike?"active":"",on:{click:t.likeResource}},[n("i",{staticClass:"iconfont nicexihuan3 icon-like"}),t._v(" "+t._s(t.videoDetailInfo.likedCount)+" ")]),n("div",{staticClass:"box"},[n("i",{staticClass:"iconfont niceshoucang2 icon-collection"}),t._v(" "+t._s(t.detail.subscribeCount)+" ")]),n("div",{staticClass:"box"},[n("i",{staticClass:"iconfont nicefenxiang2 icon-share"}),t._v(" "+t._s(t.videoDetailInfo.shareCount)+" ")])])]),n("div",{staticClass:"comment-wrap"},[n("div",{staticClass:"title flex-row"},[n("i",{staticClass:"iconfont nicepinglun"}),t._v("Comments | "),n("span",[t._v(t._s(t.videoDetailInfo.commentCount)+" 条评论")])]),""===t.currentCommentId?n("comment-box",{attrs:{"clear-text":t.clearText,"current-comment-id":t.currentCommentId,fontMaxLength:1e3},on:{commentsubmit:t.commentSubmit,cancelcomment:t.cancelComment}}):t._e(),t.hotComments.length>0?n("div",{staticClass:"hot-comment comment-list"},[t._m(0),t._l(t.hotComments,(function(e){return n("div",{key:e.commentId},[n("comment-line",{attrs:{comment:e},on:{commentreply:t.commentReply,commentlike:t.commentLike,commentdelete:t.commentDelete}}),t.currentCommentId==e.commentId?n("comment-box",{attrs:{"clear-text":t.clearText,"current-comment-id":t.currentCommentId,fontMaxLength:1e3},on:{commentsubmit:t.commentSubmit,cancelcomment:t.cancelComment}}):t._e()],1)}))],2):t._e(),n("div",{staticClass:"new-comment comment-list"},[t._m(1),t.comments.length>0?n("div",[t._l(t.comments,(function(e){return n("div",{key:e.commentId},[n("comment-line",{attrs:{comment:e},on:{commentreply:t.commentReply,commentlike:t.commentLike,commentdelete:t.commentDelete}}),t.currentCommentId==e.commentId?n("comment-box",{attrs:{"clear-text":t.clearText,"current-comment-id":t.currentCommentId,fontMaxLength:1e3},on:{commentsubmit:t.commentSubmit,cancelcomment:t.cancelComment}}):t._e()],1)})),n("el-pagination",{attrs:{background:"","hide-on-single-page":"","current-page":t.currentPage,"page-sizes":[15,20,30],"page-size":t.limit,layout:"total, sizes, prev, pager, next, jumper",total:t.commentTotal},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange,"update:currentPage":function(e){t.currentPage=e},"update:current-page":function(e){t.currentPage=e}}})],2):n("pretty-empty",{attrs:{"empty-text":"等你来评论~"}})],1)],1)]),n("div",{staticClass:"right"},[n("div",{staticClass:"introduction module shadow"},[t._m(2),n("div",{staticClass:"author"},[n("div",{staticClass:"avatar",on:{click:function(e){return t.toUser(t.creator.userId)}}},[n("img",{attrs:{src:t.creator.avatarUrl,alt:""}})]),n("p",{staticClass:"name",on:{click:function(e){return t.toUser(t.creator.userId)}}},[t._v(t._s(t.creator.nickname)+" ")])]),t.detail.description?n("p",[t._v(t._s(t.detail.description)+" ")]):n("p",[t._v("视频暂无简介~")])]),n("div",{staticClass:"related module shadow"},[t._m(3),t.relatedList.length>0?n("ul",{staticClass:"mv-list flex-row"},t._l(t.relatedList,(function(e){return n("li",{key:e.vid,class:{live:e.isLive}},[n("div",{staticClass:"cover",on:{click:function(n){return t.toDetailOrLive(e.vid,e.isLive)}}},[n("el-image",{attrs:{src:e.coverUrl}},[n("div",{staticClass:"image-slot",attrs:{slot:"error"},slot:"error"},[n("i",{staticClass:"el-icon-picture-outline",staticStyle:{"font-size":"18px"}})])]),n("div",{staticClass:"top flex-between"},[n("span",{staticClass:"count"},[n("i",{staticClass:"arrow"}),t._v(t._s(t._f("transNum")(e.playTime,1))+" ")]),n("span",[t._v(t._s(t._f("formatTime")(e.durationms)))])]),t._m(4,!0)],1),n("div",{staticClass:"info"},[n("h2",{staticClass:"title ellipsis"},[t._v(t._s(e.title))]),t._v(" By"),t._l(e.creator,(function(e){return n("span",{key:e.userId},[n("small",[t._v(" "+t._s(e.userName)+" ")])])}))],2)])})),0):n("pretty-empty",{attrs:{"empty-text":"暂无相关推荐视频~"}})],1)])])},s=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"card-header flex-row"},[n("span",[t._v("精彩评论")])])},function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"card-header flex-row"},[n("span",[t._v("最新评论")])])},function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"card-header flex-row"},[n("span",[t._v("视频简介")])])},function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"card-header flex-row"},[n("span",[t._v("相关推荐")])])},function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"action"},[n("button",{staticClass:"play flex-center"},[n("i",{staticClass:"iconfont nicebofang1"})])])}],a=(n("4160"),n("b0c0"),n("ac1f"),n("5319"),n("498a"),n("159b"),n("96cf"),n("1da1")),r=n("013a"),o=n("91ed"),c=n("b3e4"),l={name:"videoDetail",data:function(){return{currentPage:1,limit:15,offset:0,commentTotal:0,detail:{},creator:{},relatedList:[],hotComments:[],comments:[],currentCommentId:"",videoUrl:"",videoId:"",videoDetailInfo:{},clearText:!1}},components:{commentBox:r["a"],commentLine:o["a"],prettyEmpty:c["a"]},created:function(){this.videoId=this.$route.query.id,this._initailze()},methods:{commentSubmit:function(t){var e=this;return Object(a["a"])(regeneratorRuntime.mark((function n(){var i,s,a;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(""!==t.trim()){n.next=5;break}return ELEMENT.Message("请输入内容"),n.abrupt("return");case 5:return i=(new Date).getTime(),s={type:5,id:e.videoId,content:t,timestamp:i},""===e.currentCommentId?s.t=1:(s.t=2,s.commentId=e.currentCommentId),n.next=10,e.$api.commentSubmit(s);case 10:a=n.sent,200===a.code&&(ELEMENT.Message.success("提交成功"),e.currentCommentId="",e.clearText=!0,e.$nextTick((function(){e.clearText=!1})),e.getVideoDetailInfo(),e.getVideoComments());case 12:case"end":return n.stop()}}),n)})))()},cancelComment:function(){this.currentCommentId=""},commentReply:function(t){var e=this;return Object(a["a"])(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:e.currentCommentId=t;case 1:case"end":return n.stop()}}),n)})))()},commentLike:function(t,e){var n=this;return Object(a["a"])(regeneratorRuntime.mark((function i(){var s,a,r;return regeneratorRuntime.wrap((function(i){while(1)switch(i.prev=i.next){case 0:return s=(new Date).getTime(),a={id:n.videoId,cid:t,type:5,timestamp:s},a.t=e?0:1,i.next=5,n.$api.commentLike(a);case 5:r=i.sent,200===r.code&&n.getVideoComments(n.videoId);case 7:case"end":return i.stop()}}),i)})))()},commentDelete:function(t,e){var n=this;return Object(a["a"])(regeneratorRuntime.mark((function e(){var i,s,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return i=(new Date).getTime(),s={t:0,type:5,id:n.videoId,commentId:t,timestamp:i},e.next=4,n.$api.commentDelete(s);case 4:a=e.sent,200===a.code&&(ELEMENT.Message.success("删除成功"),n.getVideoDetailInfo(),n.getVideoComments());case 6:case"end":return e.stop()}}),e)})))()},likeResource:function(){var t=this;return Object(a["a"])(regeneratorRuntime.mark((function e(){var n,i,s,a,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=5,i=1,t.videoDetailInfo.isLike&&(i=2),s=(new Date).getTime(),a={t:i,type:n,id:t.videoId,timestamp:s},e.next=7,t.$api.likeResource(a);case 7:r=e.sent,200===r.code&&t.getVideoDetailInfo();case 9:case"end":return e.stop()}}),e)})))()},getVideoUrl:function(){var t=this;return Object(a["a"])(regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t.$api.getVideoUrl(t.videoId);case 3:n=e.sent,200===n.code&&(t.videoUrl=n.urls[0].url),e.next=10;break;case 7:e.prev=7,e.t0=e["catch"](0),ELEMENT.Message("视频无法加载，请重新刷新一下~");case 10:case"end":return e.stop()}}),e,null,[[0,7]])})))()},getVideoDetail:function(){var t=this;return Object(a["a"])(regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.$api.getVideoDetail(t.videoId);case 2:n=e.sent,200===n.code&&(n.data.videoGroup.forEach((function(t){t.name=t.name.replace(/#/g,"")})),t.detail=n.data,t.creator=n.data.creator);case 4:case"end":return e.stop()}}),e)})))()},getVideoDetailInfo:function(){var t=this;return Object(a["a"])(regeneratorRuntime.mark((function e(){var n,i,s,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=(new Date).getTime(),i={vid:t.videoId,timestamp:n},e.next=4,t.$api.getVideoDetailInfo(i);case 4:s=e.sent,200===s.code&&(a={isLike:s.liked,likedCount:s.likedCount,shareCount:s.shareCount,commentCount:s.commentCount},t.videoDetailInfo=a);case 6:case"end":return e.stop()}}),e)})))()},getVideoComments:function(){var t=this;return Object(a["a"])(regeneratorRuntime.mark((function e(){var n,i,s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=(new Date).getTime(),i={id:t.videoId,limit:t.limit,offset:t.offset,timestamp:n},e.next=4,t.$api.getVideoComments(i);case 4:s=e.sent,200===s.code&&(t.commentTotal=s.total,t.hotComments=s.hotComments||[],t.comments=s.comments||[]);case 6:case"end":return e.stop()}}),e)})))()},getVideoRelated:function(){var t=this;return Object(a["a"])(regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.$api.getVideoRelated(t.videoId);case 2:n=e.sent,200===n.code&&(t.relatedList=n.data);case 4:case"end":return e.stop()}}),e)})))()},toDetailOrLive:function(t,e){e?window.open("https://iplay.163.com/live?id=".concat(t),"_blank"):this.$router.push({path:"/videodetail",query:{id:t}})},toUser:function(t){this.$router.push({path:"/personal",query:{id:t}})},toVideo:function(t,e){this.$router.push({name:"video",params:{id:t,name:e}})},handleSizeChange:function(t){this.limit=t,this.offset=t*(this.currentPage-1),this.getVideoComments()},handleCurrentChange:function(t){this.currentPage=t,this.offset=(t-1)*this.limit,this.getVideoComments()},_initailze:function(){this.getVideoUrl(),this.getVideoDetail(),this.getVideoDetailInfo(),this.getVideoComments(),this.getVideoRelated()}}},m=l,u=(n("d81b"),n("2877")),d=Object(u["a"])(m,i,s,!1,null,"7401c068",null);e["default"]=d.exports},"7ec3":function(t,e,n){},8080:function(t,e,n){},"91ed":function(t,e,n){"use strict";var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"comment-line"},[n("div",{staticClass:"avatar",on:{click:function(e){return t.toUser(t.comment.user.userId)}}},[n("img",{attrs:{src:t.comment.user.avatarUrl,alt:"",title:t.comment.user.nickname}})]),n("div",{staticClass:"info"},[n("h2",{staticClass:"flex-between"},[n("span",{on:{click:function(e){return t.toUser(t.comment.user.userId)}}},[t._v(t._s(t.comment.user.nickname)+" "),n("small",[t._v(" · "+t._s(t._f("formatTimeBefore")(t.comment.time)))])]),n("div",{staticClass:"tool flex-row"},[n("i",{staticClass:"iconfont nicezan1 icon-zan",class:{active:t.comment.liked},on:{click:function(e){return t.commentLike(t.comment.commentId,t.comment.liked)}}}),n("span",[t._v("("+t._s(t.comment.likedCount)+")")]),t.comment.user.userId!=t.myId?n("i",{staticClass:"iconfont nicevoice icon-comment",attrs:{title:"回复"},on:{click:function(e){return t.commentReply(t.comment.commentId)}}}):n("i",{staticClass:"iconfont nicelajitong",attrs:{title:"删除"},on:{click:function(e){return t.commentDelete(t.comment.commentId,t.comment.content)}}})])]),n("div",{staticClass:"content"},[t._v(t._s(t.comment.content)+" "),t._l(t.comment.beReplied,(function(e){return n("div",{key:e.beRepliedCommentId,staticClass:"reply"},[n("span",[n("small",[t._v("@"+t._s(e.user.nickname)+"：")]),t._v(t._s(e.content))])])}))],2)])])},s=[],a={props:{comment:{type:Object}},computed:{myId:function(){return JSON.parse(sessionStorage.getItem("myInfo"))||this.$store.getters.getUserInfo.userId?JSON.parse(sessionStorage.getItem("myInfo")).userId||this.$store.getters.getUserInfo.userId:""}},methods:{commentReply:function(t){this.$emit("commentreply",t)},commentLike:function(t,e){this.$emit("commentlike",t,e)},commentDelete:function(t,e){this.$emit("commentdelete",t,e)},toUser:function(t){this.$router.push({path:"/personal",query:{id:t}})}}},r=a,o=(n("0605"),n("2877")),c=Object(o["a"])(r,i,s,!1,null,"4f8b491d",null);e["a"]=c.exports},"94be":function(t,e,n){"use strict";n.r(e);var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"album-detail container"},[n("div",{staticClass:"left shadow"},[n("div",{staticClass:"top"},[n("div",{staticClass:"avatar"},[n("img",{attrs:{src:t.detail.picUrl,alt:""}})]),n("div",{staticClass:"info"},[n("div",{staticClass:"title flex-row"},[n("p",[t._v(t._s(t.detail.name))])]),n("div",{staticClass:"user flex-row"},[n("div",{staticClass:"avatar",on:{click:function(e){return t.toSingerDetail(t.creator.id)}}},[n("img",{attrs:{src:t.creator.picUrl,alt:""}})]),n("span",{staticClass:"nickname",on:{click:function(e){return t.toSingerDetail(t.creator.id)}}},[t._v(" "+t._s(t.creator.name))]),n("span",{staticClass:"createTime"},[t._v(" "+t._s(t._f("formatDate")(t.detail.publishTime,"YYYY-MM-DD"))+" 创建 ")])]),n("div",{staticClass:"flex-row"},[t._v(" 发行公司："+t._s(t.detail.company)+" ")]),n("div",{staticClass:"desc"},[n("p",{staticClass:"ellipsis-two",domProps:{innerHTML:t._s(t.detail.description)}}),t.txtLength(t.detail.description)>50?n("span",{staticClass:"flex-row",on:{click:function(e){return t.openDesc(t.detail.description,t.detail.name)}}},[t._v("全部"),n("i",{staticClass:"iconfont niceiconfontyoujiantou-copy-copy-copy-copy"})]):t._e()])])]),n("div",{directives:[{name:"loading",rawName:"v-loading",value:t.screenLoading,expression:"screenLoading"}],staticClass:"content"},[n("sheet-song-list",{attrs:{songs:t.songs,"is-person":!1}})],1),n("div",{staticClass:"comment"},[t._m(0),t.comments.length>0?n("ul",t._l(t.comments,(function(e){return n("li",{key:e.commentId,staticClass:"item"},[n("div",{staticClass:"avatar",on:{click:function(n){return t.toUser(e.user.userId)}}},[n("img",{attrs:{src:e.user.avatarUrl,alt:"",title:e.user.nickname}})]),n("div",{staticClass:"info"},[n("span",{on:{click:function(n){return t.toUser(e.user.userId)}}},[t._v(" "+t._s(e.user.nickname)),n("small",[t._v(" · "+t._s(t._f("formatTimeBefore")(e.time)))])]),n("p",[t._v(t._s(e.content))])])])})),0):n("p",{staticClass:"no-data-text",staticStyle:{"padding-bottom":"10px"}},[t._v(" "+t._s(t.emptyComment)+" ")])])]),n("div",{staticClass:"right"},[n("div",{staticClass:"related module shadow"},[t._m(1),t.hotAlbums.length>0?n("ul",t._l(t.hotAlbums,(function(e){return n("li",{key:e.id,on:{click:function(n){return t.toAlbumDetail(e.id)}}},[n("div",{staticClass:"avatar"},[n("img",{attrs:{src:e.picUrl,alt:"",title:e.name}})]),n("div",{staticClass:"info"},[n("h2",{staticClass:"ellipsis",attrs:{title:e.name}},[t._v(t._s(e.name))]),n("span",[t._v("By."),n("small",[t._v(t._s(e.artist.name))])])])])})),0):n("p",{staticClass:"no-data-text",staticStyle:{"padding-bottom":"10px"}},[t._v(" "+t._s(t.emptyAlbum)+" ")])])])])},s=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"card-header flex-row"},[n("span",[t._v("精彩评论")])])},function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"card-header flex-row"},[n("span",[t._v("热门专辑")])])}],a=(n("a4d3"),n("e01a"),n("4160"),n("ac1f"),n("5319"),n("159b"),n("96cf"),n("1da1")),r=n("6d75"),o=n("8c9f"),c={name:"albumDetail",data:function(){return{detail:{},creator:{},albumId:"",comments:[],songs:[],hotAlbums:[],screenLoading:!1,emptyComment:"",emptyAlbum:""}},components:{sheetSongList:o["a"]},computed:{txtLength:function(){return function(t){if(t)return t.length}}},created:function(){this.albumId=this.$route.query.id,this._initialize()},methods:{getAlbumData:function(){var t=this;return Object(a["a"])(regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.screenLoading=!0,e.prev=1,e.next=4,t.$api.getAlbumData(t.albumId);case 4:n=e.sent,200===n.code&&(n.album.description=n.album.description.replace(/(\r\n|\n|\r)/g,"<br />"),t.detail=n.album,t.creator=n.album.artist,t.songs=t._normalizeSongs(n.songs),t.screenLoading=!1),e.next=11;break;case 8:e.prev=8,e.t0=e["catch"](1),t.screenLoading=!1;case 11:case"end":return e.stop()}}),e,null,[[1,8]])})))()},getArtistAlbum:function(){var t=this;return Object(a["a"])(regeneratorRuntime.mark((function e(){var n,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n={id:t.creator.id,limit:10,offset:0},e.next=3,t.$api.getArtistAlbum(n);case 3:i=e.sent,200===i.code&&(t.hotAlbums=i.hotAlbums,0===i.hotAlbums.length&&(t.emptyAlbum="还没有其他专辑~"));case 5:case"end":return e.stop()}}),e)})))()},getAlbumComment:function(){var t=this;return Object(a["a"])(regeneratorRuntime.mark((function e(){var n,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n={id:t.albumId,limit:30,offset:0},e.next=3,t.$api.getAlbumComment(n);case 3:i=e.sent,200===i.code&&(i.hotComments.length>0?t.comments=i.hotComments:t.comments=i.comments,0===t.comments.length&&(t.emptyComment="等你来评论~"));case 5:case"end":return e.stop()}}),e)})))()},_normalizeSongs:function(t){var e=[];return t.forEach((function(t){t.id&&e.push(Object(r["a"])(t))})),e},openDesc:function(t,e){ELEMENT.MessageBox.alert(t,e,{closeOnClickModal:!0,customClass:"descBox",showConfirmButton:!1,dangerouslyUseHTMLString:!0}).catch((function(t){}))},toAlbumDetail:function(t){this.$router.push({path:"/albumdetail",query:{id:t}})},toSingerDetail:function(t){this.$router.push({path:"/singerdetail",query:{id:t}})},toUser:function(t){this.$router.push({path:"/personal",query:{id:t}})},_initialize:function(){var t=this;return Object(a["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.getAlbumData();case 2:t.getArtistAlbum(),t.getAlbumComment();case 4:case"end":return e.stop()}}),e)})))()}}},l=c,m=(n("648c"),n("2877")),u=Object(m["a"])(l,i,s,!1,null,"70efe47b",null);e["default"]=u.exports},d81b:function(t,e,n){"use strict";var i=n("8080"),s=n.n(i);s.a},dd11:function(t,e,n){"use strict";var i=n("f889"),s=n.n(i);s.a},e01a:function(t,e,n){"use strict";var i=n("23e7"),s=n("83ab"),a=n("da84"),r=n("5135"),o=n("861d"),c=n("9bf2").f,l=n("e893"),m=a.Symbol;if(s&&"function"==typeof m&&(!("description"in m.prototype)||void 0!==m().description)){var u={},d=function(){var t=arguments.length<1||void 0===arguments[0]?void 0:String(arguments[0]),e=this instanceof d?new m(t):void 0===t?m():m(t);return""===t&&(u[e]=!0),e};l(d,m);var f=d.prototype=m.prototype;f.constructor=d;var v=f.toString,p="Symbol(test)"==String(m("test")),g=/^Symbol\((.*)\)[^)]+$/;c(f,"description",{configurable:!0,get:function(){var t=o(this)?this.valueOf():this,e=v.call(t);if(r(u,t))return"";var n=p?e.slice(7,-1):e.replace(g,"$1");return""===n?void 0:n}}),i({global:!0,forced:!0},{Symbol:d})}},e3b9:function(t,e,n){"use strict";n.r(e);var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"video-detail container"},[n("div",{staticClass:"left shadow"},[n("div",{staticClass:"video-container"},[n("video",{attrs:{src:t.videoUrl,controls:"",controlslist:"nodownload"}})]),n("div",{staticClass:"video-foot"},[n("h2",{staticClass:"title flex-row ellipsis"},[n("i",{staticClass:"iconfont nicemv24"}),t._v(" "+t._s(t.detail.name)+" ")]),n("div",{staticClass:"tag"},t._l(t.detail.videoGroup,(function(e){return n("a",{key:e.id},[t._v(" "+t._s(e.name)+" ")])})),0),n("p",{staticClass:"flex-row"},[n("span",[t._v("发布："+t._s(t._f("formatDate")(t.detail.publishTime,"YYYY-MM-DD")))]),t.detail.playTime?n("span",[t._v("播放次数："+t._s(t._f("transNum")(t.detail.playTime,1)))]):t._e()]),n("div",{staticClass:"follow flex-row"},[n("div",{staticClass:"box",class:t.videoDetailInfo.isLike?"active":"",on:{click:t.likeResource}},[n("i",{staticClass:"iconfont nicexihuan3 icon-like"}),t._v(" "+t._s(t.videoDetailInfo.likedCount)+" ")]),n("div",{staticClass:"box"},[n("i",{staticClass:"iconfont niceshoucang2 icon-collection"}),t._v(" "+t._s(t.detail.subCount)+" ")]),n("div",{staticClass:"box"},[n("i",{staticClass:"iconfont nicefenxiang2 icon-share"}),t._v(" "+t._s(t.videoDetailInfo.shareCount)+" ")])])]),n("div",{staticClass:"comment-wrap"},[n("div",{staticClass:"title flex-row"},[n("i",{staticClass:"iconfont nicepinglun"}),t._v("Comments | "),n("span",[t._v(t._s(t.videoDetailInfo.commentCount)+" 条评论")])]),""===t.currentCommentId?n("comment-box",{attrs:{"clear-text":t.clearText,"current-comment-id":t.currentCommentId,fontMaxLength:1e3},on:{commentsubmit:t.commentSubmit,cancelcomment:t.cancelComment}}):t._e(),t.hotComments.length>0?n("div",{staticClass:"hot-comment comment-list"},[t._m(0),t._l(t.hotComments,(function(e){return n("div",{key:e.commentId},[n("comment-line",{attrs:{comment:e},on:{commentreply:t.commentReply,commentlike:t.commentLike,commentdelete:t.commentDelete}}),t.currentCommentId==e.commentId?n("comment-box",{attrs:{"clear-text":t.clearText,"current-comment-id":t.currentCommentId,fontMaxLength:1e3},on:{commentsubmit:t.commentSubmit,cancelcomment:t.cancelComment}}):t._e()],1)}))],2):t._e(),n("div",{staticClass:"new-comment comment-list"},[t._m(1),t.comments.length>0?n("div",[t._l(t.comments,(function(e){return n("div",{key:e.commentId},[n("comment-line",{attrs:{comment:e},on:{commentreply:t.commentReply,commentlike:t.commentLike,commentdelete:t.commentDelete}}),t.currentCommentId==e.commentId?n("comment-box",{attrs:{"clear-text":t.clearText,"current-comment-id":t.currentCommentId,fontMaxLength:1e3},on:{commentsubmit:t.commentSubmit,cancelcomment:t.cancelComment}}):t._e()],1)})),n("el-pagination",{attrs:{background:"","hide-on-single-page":"","current-page":t.currentPage,"page-sizes":[15,20,30],"page-size":t.limit,layout:"total, sizes, prev, pager, next, jumper",total:t.commentTotal},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange,"update:currentPage":function(e){t.currentPage=e},"update:current-page":function(e){t.currentPage=e}}})],2):n("pretty-empty",{attrs:{"empty-text":"等你来评论~"}})],1)],1)]),n("div",{staticClass:"right"},[n("div",{staticClass:"introduction module shadow"},[t._m(2),t._l(t.artists,(function(e){return n("div",{key:e.id,staticClass:"author"},[n("div",{staticClass:"avatar",on:{click:function(n){return t.toSinger(e.id)}}},[n("img",{attrs:{src:e.img1v1Url,alt:""}})]),n("p",{staticClass:"name",on:{click:function(n){return t.toSinger(e.id)}}},[t._v(t._s(e.name)+" ")])])})),t.detail.desc?n("p",[t._v(t._s(t.detail.desc)+" ")]):n("p",[t._v("视频暂无简介~")])],2),n("div",{staticClass:"related module shadow"},[t._m(3),t.relatedList.length>0?n("ul",{staticClass:"mv-list flex-row"},t._l(t.relatedList,(function(e){return n("li",{key:e.vid,class:{live:e.isLive}},[n("div",{staticClass:"cover",on:{click:function(n){return t.toDetailOrLive(e.vid,e.isLive)}}},[n("el-image",{attrs:{src:e.cover}},[n("div",{staticClass:"image-slot",attrs:{slot:"error"},slot:"error"},[n("i",{staticClass:"el-icon-picture-outline",staticStyle:{"font-size":"18px"}})])]),n("div",{staticClass:"top flex-between"},[n("span",{staticClass:"count"},[n("i",{staticClass:"arrow"}),t._v(t._s(t._f("transNum")(e.playCount,1))+" ")]),n("span",[t._v(t._s(t._f("formatTime")(e.duration)))])]),t._m(4,!0)],1),n("div",{staticClass:"info"},[n("h2",{staticClass:"title ellipsis"},[n("i",{staticClass:"iconfont nicemv24"}),t._v(" "+t._s(e.name)+" ")]),t._v(" By"),t._l(e.artists,(function(e){return n("span",{key:e.id},[n("small",[t._v(" "+t._s(e.name)+" ")])])}))],2)])})),0):n("pretty-empty",{attrs:{"empty-text":"暂无相关推荐视频~"}})],1)])])},s=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"card-header flex-row"},[n("span",[t._v("精彩评论")])])},function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"card-header flex-row"},[n("span",[t._v("最新评论")])])},function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"card-header flex-row"},[n("span",[t._v("视频简介")])])},function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"card-header flex-row"},[n("span",[t._v("相关推荐")])])},function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"action"},[n("button",{staticClass:"play flex-center"},[n("i",{staticClass:"iconfont nicebofang1"})])])}],a=(n("4160"),n("b0c0"),n("ac1f"),n("5319"),n("498a"),n("159b"),n("96cf"),n("1da1")),r=n("013a"),o=n("91ed"),c=n("b3e4"),l={data:function(){return{currentPage:1,limit:15,offset:0,commentTotal:0,detail:{},artists:[],relatedList:[],hotComments:[],comments:[],currentCommentId:"",videoUrl:"",videoId:"",videoDetailInfo:{},clearText:!1}},components:{commentBox:r["a"],commentLine:o["a"],prettyEmpty:c["a"]},created:function(){this.videoId=this.$route.query.id,this._initailze()},methods:{commentSubmit:function(t){var e=this;return Object(a["a"])(regeneratorRuntime.mark((function n(){var i,s,a;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(""!==t.trim()){n.next=5;break}return ELEMENT.Message("请输入内容"),n.abrupt("return");case 5:return i=(new Date).getTime(),s={type:1,id:e.videoId,content:t,timestamp:i},""===e.currentCommentId?s.t=1:(s.t=2,s.commentId=e.currentCommentId),n.next=10,e.$api.commentSubmit(s);case 10:a=n.sent,200===a.code&&(ELEMENT.Message.success("提交成功"),e.currentCommentId="",e.clearText=!0,e.$nextTick((function(){e.clearText=!1})),e.getMvDetailInfo(),e.getMvComments());case 12:case"end":return n.stop()}}),n)})))()},cancelComment:function(){this.currentCommentId=""},commentReply:function(t){var e=this;return Object(a["a"])(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:e.currentCommentId=t;case 1:case"end":return n.stop()}}),n)})))()},commentLike:function(t,e){var n=this;return Object(a["a"])(regeneratorRuntime.mark((function i(){var s,a,r;return regeneratorRuntime.wrap((function(i){while(1)switch(i.prev=i.next){case 0:return s=(new Date).getTime(),a={id:n.videoId,cid:t,type:1,timestamp:s},a.t=e?0:1,i.next=5,n.$api.commentLike(a);case 5:r=i.sent,200===r.code&&n.getMvComments(n.videoId);case 7:case"end":return i.stop()}}),i)})))()},commentDelete:function(t,e){var n=this;return Object(a["a"])(regeneratorRuntime.mark((function e(){var i,s,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return i=(new Date).getTime(),s={t:0,type:1,id:n.videoId,commentId:t,timestamp:i},e.next=4,n.$api.commentDelete(s);case 4:a=e.sent,200===a.code&&(ELEMENT.Message.success("删除成功"),n.getMvDetailInfo(),n.getMvComments());case 6:case"end":return e.stop()}}),e)})))()},likeResource:function(){var t=this;return Object(a["a"])(regeneratorRuntime.mark((function e(){var n,i,s,a,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=1,i=1,t.videoDetailInfo.isLike&&(i=2),s=(new Date).getTime(),a={t:i,type:n,id:t.videoId,timestamp:s},e.next=7,t.$api.likeResource(a);case 7:r=e.sent,200===r.code&&t.getMvDetailInfo();case 9:case"end":return e.stop()}}),e)})))()},getMvUrl:function(){var t=this;return Object(a["a"])(regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t.$api.getMvUrl(t.videoId);case 3:n=e.sent,200===n.code&&(t.videoUrl=n.data.url),e.next=10;break;case 7:e.prev=7,e.t0=e["catch"](0),ELEMENT.Message("视频无法加载，请重新刷新一下~");case 10:case"end":return e.stop()}}),e,null,[[0,7]])})))()},getMvDetail:function(){var t=this;return Object(a["a"])(regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.$api.getMvDetail(t.videoId);case 2:n=e.sent,200===n.code&&(n.data.videoGroup.forEach((function(t){t.name=t.name.replace(/#/g,"")})),t.detail=n.data,t.artists=n.data.artists);case 4:case"end":return e.stop()}}),e)})))()},getMvDetailInfo:function(){var t=this;return Object(a["a"])(regeneratorRuntime.mark((function e(){var n,i,s,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=(new Date).getTime(),i={mvid:t.videoId,timestamp:n},e.next=4,t.$api.getMvDetailInfo(i);case 4:s=e.sent,200===s.code&&(a={isLike:s.liked,likedCount:s.likedCount,shareCount:s.shareCount,commentCount:s.commentCount},t.videoDetailInfo=a);case 6:case"end":return e.stop()}}),e)})))()},getMvComments:function(){var t=this;return Object(a["a"])(regeneratorRuntime.mark((function e(){var n,i,s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=(new Date).getTime(),i={id:t.videoId,limit:t.limit,offset:t.offset,timestamp:n},e.next=4,t.$api.getMvComments(i);case 4:s=e.sent,200===s.code&&(t.commentTotal=s.total,t.hotComments=s.hotComments||[],t.comments=s.comments||[]);case 6:case"end":return e.stop()}}),e)})))()},getMvRelated:function(){var t=this;return Object(a["a"])(regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.$api.getMvRelated(t.videoId);case 2:n=e.sent,200===n.code&&(t.relatedList=n.mvs);case 4:case"end":return e.stop()}}),e)})))()},toDetailOrLive:function(t,e){e?window.open("https://iplay.163.com/live?id=".concat(t),"_blank"):this.$router.push({path:"/mvdetail",query:{id:t}})},toSinger:function(t){this.$router.push({path:"/singerdetail",query:{id:t}})},handleSizeChange:function(t){this.limit=t,this.offset=t*(this.currentPage-1),this.getMvComments()},handleCurrentChange:function(t){this.currentPage=t,this.offset=(t-1)*this.limit,this.getMvComments()},_initailze:function(){this.getMvUrl(),this.getMvDetail(),this.getMvDetailInfo(),this.getMvComments(),this.getMvRelated()}}},m=l,u=(n("09b3"),n("2877")),d=Object(u["a"])(m,i,s,!1,null,"7b870ad7",null);e["default"]=d.exports},f889:function(t,e,n){}}]);
//# sourceMappingURL=detail.c85c3e54.js.map