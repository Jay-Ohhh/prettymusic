(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-27a08a02"],{"0031":function(t,e,s){"use strict";var a=s("845f"),i=s.n(a);i.a},"2dab":function(t,e,s){"use strict";var a=s("9cc6"),i=s.n(a);i.a},"352f":function(t,e,s){},"423d":function(t,e,s){"use strict";var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"song-sheet"},t._l(t.sheetList,(function(e){return s("div",{key:e.id,staticClass:"list-item",class:t.numClass,on:{click:function(s){return t.toDetail(e)}}},[s("a",[s("div",{staticClass:"img-wrapper"},[s("el-image",{attrs:{src:e.picUrl||e.coverImgUrl+"?param=300y300",lazy:""}},[s("div",{staticClass:"image-slot ",attrs:{slot:"error"},slot:"error"},[s("i",{staticClass:"el-icon-picture-outline"})])])],1),s("span",{staticClass:"list-name ellipsis-two"},[t._v(t._s(e.name))]),s("div",{staticClass:"count-wrapper"},[s("i",{staticClass:"arrow"}),s("span",{staticClass:"count"},[t._v(t._s(t._f("transNum")(e.playCount,1)))])])])])})),0)},i=[],n=(s("a9e3"),{props:{sheetList:{type:Array,default:function(){return[]}},num:{type:Number,default:8}},computed:{numClass:function(){return 2===this.num?"two":""}},methods:{toDetail:function(t){this.$router.push({path:"playlistdetail",query:{id:t.id}})}}}),r=n,c=(s("7e64"),s("2877")),l=Object(c["a"])(r,a,i,!1,null,"796b3e70",null);e["a"]=l.exports},"7e64":function(t,e,s){"use strict";var a=s("8b09"),i=s.n(a);i.a},"845f":function(t,e,s){},"8b09":function(t,e,s){},"8c9f":function(t,e,s){"use strict";var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"list-wrapper"},[0!==t.songs.length?s("div",{staticClass:"tool-head"},[s("div",{staticClass:"item play-item",on:{click:t.playAllSong}},[s("i",{staticClass:"iconfont niceOutlined_Play"}),t._v("播放全部 ")]),t.isPerson||"/playlistdetail"!==t.$route.path?t._e():s("div",{staticClass:"item",class:t.subscribed?"active":"",on:{click:t.collect}},[s("i",{staticClass:"iconfont niceicon-heart"}),t._v(t._s(t.collectText)+" ")])]):t._e(),s("table",{staticClass:"sheet-table"},[t._m(0),s("tbody",t._l(t.songs,(function(e,a){return s("tr",{key:e.id,class:t.getCurrentSong.id===e.id&&t.getPlaying?"playing":""},[s("td",[s("div",{staticClass:"index-container flex-center"},[s("span",{staticClass:"num"},[t._v(t._s(t._f("formatZero")(a+1,2)))]),t._m(1,!0),s("i",{staticClass:"iconfont nicebofang2 play-btn",on:{click:function(s){return t.playSong(e,a)}}}),s("i",{staticClass:"iconfont nicezanting1 pause-btn",on:{click:function(s){return t.pauseSong(e,a)}}})])]),s("td",[s("div",{staticClass:"name-container"},[s("div",{staticClass:"avatar"},[s("el-image",{attrs:{src:e.picUrl+"?param=80y80",lazy:""}},[s("div",{staticClass:"image-slot",attrs:{slot:"error"},slot:"error"},[s("i",{staticClass:"iconfont niceicon-3"})])])],1),s("span",{staticClass:"name ellipsis",attrs:{title:e.name}},[t._v(t._s(e.name))])])]),s("td",[s("div",{staticClass:"artist-container ellipsis"},[s("span",{staticClass:"author",attrs:{title:e.singer}},[t._v(t._s(e.singer))])])]),s("td",[s("div",{staticClass:"album-container ellipsis"},[s("span",{staticClass:"album",attrs:{title:e.album}},[t._v(t._s(e.album))])])]),s("td",[s("div",{staticClass:"duration-container"},[s("span",{staticClass:"duration"},[t._v(t._s(t._f("formatTime")(e.duration)))]),t._m(2,!0)])])])})),0)])])},i=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("thead",[s("tr",[s("th",{staticClass:"th-index"},[t._v("序号")]),s("th",{staticClass:"th-name"},[t._v("歌曲")]),s("th",{staticClass:"th-artist"},[t._v("歌手")]),s("th",{staticClass:"th-album"},[t._v("专辑")]),s("th",{staticClass:"th-duration"},[t._v("时长")])])])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"play-icon"},[s("div",{staticClass:"line",staticStyle:{"animation-delay":"-1.2s"}}),s("div",{staticClass:"line",staticStyle:{"animation-delay":"0s"}}),s("div",{staticClass:"line",staticStyle:{"animation-delay":"-1.5s"}}),s("div",{staticClass:"line",staticStyle:{"animation-delay":"-0.9s"}}),s("div",{staticClass:"line",staticStyle:{"animation-delay":"-0.6s"}})])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"song-tools"},[s("i",{staticClass:"iconfont niceicon-heart",attrs:{title:"喜欢"}}),s("i",{staticClass:"iconfont nicexiazai",attrs:{title:"下载"}}),s("i",{staticClass:"iconfont nicedot",attrs:{title:"更多"}})])}],n=s("5530"),r=s("5880"),c={props:{songs:{type:Array},subscribed:{type:Boolean},isPerson:{type:Boolean,default:!1}},computed:Object(n["a"])(Object(n["a"])({},Object(r["mapGetters"])(["getCurrentSong","getPlaying","getCurrentMode"])),{},{collectText:function(){return this.subscribed?"已收藏":"收藏"}}),methods:Object(n["a"])(Object(n["a"])(Object(n["a"])({},Object(r["mapMutations"])(["setPlaying","setSongSheet"])),Object(r["mapActions"])(["selectPlay","pausePlay","playAll"])),{},{playSong:function(t,e){t.id!==this.getCurrentSong.id||this.getCurrentMode===this.getCurrentMode.random?(this.$store.dispatch("selectPlay",{list:this.songs,index:e}),this.setSongSheet(this.songs)):this.setPlaying(!0)},pauseSong:function(){this.pausePlay()},playAllSong:function(){this.playAll({list:this.songs}),this.setSongSheet(this.songs)},collect:function(){this.$emit("collectartist")}})},l=c,o=(s("2dab"),s("2877")),u=Object(o["a"])(l,a,i,!1,null,"2e41ebd3",null);e["a"]=u.exports},"9cc6":function(t,e,s){},b3e4:function(t,e,s){"use strict";var a=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"pretty-empty"},[a("img",{attrs:{src:s("f3f6"),alt:""}}),""!==t.emptyText?a("p",[t._v(t._s(t.emptyText))]):t._e()])},i=[],n={props:{emptyText:{type:String,default:""}}},r=n,c=(s("0031"),s("2877")),l=Object(c["a"])(r,a,i,!1,null,null,null);e["a"]=l.exports},b76f:function(t,e,s){"use strict";s.r(e);var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"personal-wrap"},[s("div",{staticClass:"banner player"}),s("div",{staticClass:"personal-main container"},[s("div",{staticClass:"left"},[s("div",{staticClass:"user-box shadow"},[s("div",{staticClass:"background layer",style:"backgroundImage:url("+t.userProfile.backgroundUrl+")"}),s("div",{staticClass:"card flex-row"},[s("div",{staticClass:"avatar shadow"},[s("img",{attrs:{src:t.userProfile.avatarUrl,alt:""}})]),s("div",{staticClass:"info flex-between"},[s("p",{staticClass:"name ellipsis"},[t._v(" "+t._s(t.userProfile.nickname)+" ")]),t.myId===t.userId?s("div",[t.userDetail.pcSign?s("button",{staticClass:"sign-btn"},[t._v("已签到")]):s("button",{staticClass:"sign-btn sign-btn-active",on:{click:t.signIn}},[t._v("签到")])]):t._e()])]),s("p",{staticClass:"desc",attrs:{title:t.userDetail.signature}},[t._v(" "+t._s(t.userDetail.signature)+" ")]),s("div",{staticClass:"profile"},[s("div",{staticClass:"tag"},[t._v("等级："),s("i",{staticClass:"iconfont lv-icon",class:"nicelevel-"+t.userDetail.level})]),s("div",{staticClass:"tag"},[t._v("年龄： "),s("span",[t._v(t._s(t.age))]),1===t.userProfile.gender?s("i",{staticClass:"iconfont niceCRM_icon_nanxing sex-icon man"}):t._e(),2===t.userProfile.gender?s("i",{staticClass:"iconfont niceCRM_icon_nvxing sex-icon woman"}):t._e()]),s("div",{staticClass:"tag"},[t._v("地区： "),s("span",[t._v(t._s(t.provinceName)+" "),t.cityName?s("span",[t._v("-")]):t._e(),t._v(" "+t._s(t.cityName))])])]),s("ul",{staticClass:"follow"},[s("li",[t._v(" 动态"),s("span",[t._v(t._s(t.userProfile.eventCount))])]),s("li",[t._v(" 关注"),s("span",[t._v(t._s(t.userProfile.newFollows))])]),s("li",[t._v(" 粉丝"),s("span",[t._v(t._s(t.userProfile.followeds))])])]),s("div",{staticClass:"foot flex-center"},[t.myId===t.userId?s("router-link",{attrs:{to:t.$route.fullPath}},[t._v("个人设置 ")]):t.myId===t.userId||t.followed?s("div",{staticClass:"add-follow",on:{click:function(e){return t.followUser(0)}}},[t._v("已关注")]):s("div",{staticClass:"add-follow",on:{click:function(e){return t.followUser(1)}}},[t._v("+ 关注")])],1)])]),s("div",{staticClass:"center shadow"},[s("div",{staticClass:"card-header flex-between"},[s("p",{staticClass:"flex-row"},[t._v(" 听歌排行"),s("span",[t._v("（累积听歌"+t._s(t.userDetail.listenSongs)+"首）")])]),s("div",{staticClass:"tab flex-row"},[s("span",{class:1===t.type?"active":"",on:{click:function(e){return t.changeType(1)}}},[t._v("最近一周")]),s("span",{staticClass:"line"}),s("span",{class:0===t.type?"active":"",on:{click:function(e){return t.changeType(0)}}},[t._v("所有时间")])])]),t.songs.length>0?s("song-sheet-list",{attrs:{songs:t.songs}}):s("pretty-empty",{attrs:{"empty-text":t.emptyText}})],1),s("div",{staticClass:"right"},[s("div",{staticClass:"my create module shadow"},[t._m(0),s("song-sheet",{attrs:{"sheet-list":t.myList,num:2}})],1),s("div",{staticClass:"my collect module shadow"},[t._m(1),s("song-sheet",{attrs:{"sheet-list":t.collectList,num:2}})],1)])])])},i=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"card-header flex-row"},[s("span",[t._v("我创建的歌单")])])},function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"card-header flex-row"},[s("span",[t._v("我收藏的歌单")])])}],n=(s("4160"),s("b0c0"),s("159b"),s("96cf"),s("1da1")),r=s("5530"),c=s("8c9f"),l=s("b3e4"),o=s("423d"),u=s("5880"),d=s("6d75"),f=s("cebe"),p=s.n(f),v={name:"personal",data:function(){return{provinceName:"",cityName:"",songs:[],myList:[],collectList:[],type:1,userDetail:{},userProfile:{},userId:"",age:"",emptyText:"",followed:!1}},components:{songSheetList:c["a"],prettyEmpty:l["a"],songSheet:o["a"]},computed:Object(r["a"])(Object(r["a"])({},Object(u["mapGetters"])(["getUserInfo"])),{},{myId:function(){return sessionStorage.getItem("myInfo")||this.getUserInfo.userId?JSON.parse(sessionStorage.getItem("myInfo")).userId+""||this.getUserInfo.userId:""}}),created:function(){this.userId=this.$route.query.id,this._initialize()},methods:{signIn:function(){var t=this;return Object(n["a"])(regeneratorRuntime.mark((function e(){var s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.$api.signIn();case 2:s=e.sent,200===s.code&&(t.userDetail.pcSign=!0);case 4:case"end":return e.stop()}}),e)})))()},followUser:function(t){var e=this;return Object(n["a"])(regeneratorRuntime.mark((function s(){var a;return regeneratorRuntime.wrap((function(s){while(1)switch(s.prev=s.next){case 0:if(!sessionStorage.getItem("cookie")||!sessionStorage.getItem("token")){s.next=7;break}return s.next=3,e.$api.followUser(e.userProfile.userId,t);case 3:a=s.sent,200===a.code&&(1===t?(e.followed=!0,e.userProfile.followeds+=1):0===t&&(e.followed=!1,e.userProfile.followeds-=1)),s.next=9;break;case 7:e.$msg("请先登录"),e.$router.push("/login");case 9:case"end":return s.stop()}}),s)})))()},getArea:function(){var t=this;p.a.get("https://restapi.amap.com/v3/config/district",{params:{key:"5fcc853f4b7fcbbb608a33b4069b9b72",keywords:this.userProfile.province,subdistrict:1,extensions:"base"},timeout:5e3}).then((function(e){if("1"===e.data.status&&"OK"===e.data.info&&0!==e.data.districts.length){var s=e.data.districts[0];if(t.provinceName=s.name,0!==e.data.districts[0].districts.length){var a=e.data.districts[0].districts;a.forEach((function(e){e.adcode==t.userProfile.city&&(t.cityName=e.name)}))}}}))},changeType:function(t){this.type=t,this.getUserRecord()},getUserDetail:function(){var t=this;return Object(n["a"])(regeneratorRuntime.mark((function e(){var s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.$api.getUserDetail(t.userId);case 2:s=e.sent,200===s.code&&(t.userDetail=s,t.userProfile=s.profile,t.followed=s.profile.followed,t.age=Object(d["b"])(s.profile.birthday));case 4:case"end":return e.stop()}}),e)})))()},getUserRecord:function(){var t=this;return Object(n["a"])(regeneratorRuntime.mark((function e(){var s,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.$api.getUserRecord(t.userId,t.type);case 2:s=e.sent,200===s.code&&(a=s.weekData||s.allData,0!==a.length?t.songs=t._normalizeSongs(a):t.emptyText="ta可能不想让我们看到~");case 4:case"end":return e.stop()}}),e)})))()},getUserArtist:function(){var t=this;return Object(n["a"])(regeneratorRuntime.mark((function e(){var s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.$api.getUserArtist({uid:t.userId});case 2:s=e.sent,200===s.code&&s.playlist.forEach((function(e){e.userId==t.userId?t.myList.push(e):t.collectList.push(e)}));case 4:case"end":return e.stop()}}),e)})))()},_initialize:function(){var t=this;return Object(n["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.getUserDetail();case 2:t.getArea(),t.getUserRecord(),t.getUserArtist();case 5:case"end":return e.stop()}}),e)})))()},_normalizeSongs:function(t){var e=[];return t.forEach((function(t){t.song.playCount=t.playCount,t.song.score=t.score,t.song.id&&e.push(Object(d["a"])(t.song))})),e}}},m=v,g=(s("dfeb"),s("2877")),h=Object(g["a"])(m,a,i,!1,null,"2d33b8c9",null);e["default"]=h.exports},dfeb:function(t,e,s){"use strict";var a=s("352f"),i=s.n(a);i.a},f3f6:function(t,e,s){t.exports=s.p+"img/empty.8c6a4bd5.png"}}]);
//# sourceMappingURL=chunk-27a08a02.b6392dbc.js.map