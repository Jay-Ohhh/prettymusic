(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-17de2613"],{"129f":function(e,t){e.exports=Object.is||function(e,t){return e===t?0!==e||1/e===1/t:e!=e&&t!=t}},3788:function(e,t,s){},"423d":function(e,t,s){"use strict";var n=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"song-sheet"},e._l(e.sheetList,(function(t){return s("div",{key:t.id,staticClass:"list-item",class:e.numClass,on:{click:function(s){return e.toDetail(t)}}},[s("a",[s("div",{staticClass:"img-wrapper"},[s("el-image",{attrs:{src:t.picUrl||t.coverImgUrl+"?param=300y300",lazy:""}},[s("div",{staticClass:"image-slot ",attrs:{slot:"error"},slot:"error"},[s("i",{staticClass:"el-icon-picture-outline"})])])],1),s("span",{staticClass:"list-name ellipsis-two"},[e._v(e._s(t.name))]),s("div",{staticClass:"count-wrapper"},[s("i",{staticClass:"arrow"}),s("span",{staticClass:"count"},[e._v(e._s(e._f("transNum")(t.playCount,1)))])])])])})),0)},r=[],i=(s("a9e3"),{props:{sheetList:{type:Array,default:function(){return[]}},num:{type:Number,default:8}},computed:{numClass:function(){return 2===this.num?"two":""}},methods:{toDetail:function(e){this.$router.push({path:"playlistdetail",query:{id:e.id}})}}}),a=i,c=(s("7e64"),s("2877")),u=Object(c["a"])(a,n,r,!1,null,"796b3e70",null);t["a"]=u.exports},"794b":function(e,t,s){"use strict";s.r(t);var n=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"search-wrap",on:{click:e.cancelInputFocus}},[s("div",{staticClass:"banner layer"},[s("div",{staticClass:"search-inner"},[s("div",{staticClass:"search-box flex-row"},[s("input",{directives:[{name:"model",rawName:"v-model",value:e.keyword,expression:"keyword"}],staticClass:"input",attrs:{type:"text",maxlength:"128",placeholder:"搜索音乐/MV/歌单/歌手"},domProps:{value:e.keyword},on:{click:function(t){return t.stopPropagation(),e.inputFocus(t)},input:function(t){t.target.composing||(e.keyword=t.target.value)}}}),s("i",{staticClass:"iconfont nicesearch-o search-icon"})]),0!==Object.keys(e.searchResult).length?s("div",{staticClass:"list",class:e.isKeyword?"drop":""},[e.searchResult.songs&&e.searchResult.songs.length>0?s("div",{staticClass:"item"},[e._m(0),s("ul",e._l(e.searchResult.songs,(function(t){return s("li",{key:t.id,on:{click:function(s){return e.search(1,t.name)}}},[e._v(" "+e._s(t.name)+" ")])})),0)]):e._e(),e.searchResult.artists&&e.searchResult.artists.length>0?s("div",{staticClass:"item"},[e._m(1),s("ul",e._l(e.searchResult.artists,(function(t){return s("li",{key:t.id,on:{click:function(s){return e.search(100,t.name)}}},[e._v(" "+e._s(t.name)+" ")])})),0)]):e._e(),e.searchResult.albums&&e.searchResult.albums.length>0?s("div",{staticClass:"item"},[e._m(2),s("ul",e._l(e.searchResult.albums,(function(t){return s("li",{key:t.id,on:{click:function(s){return e.search(10,t.name)}}},[e._v(" "+e._s(t.name)+" ")])})),0)]):e._e(),e.searchResult.playlists&&e.searchResult.playlists.length>0?s("div",{staticClass:"item"},[e._m(3),s("ul",e._l(e.searchResult.playlists,(function(t){return s("li",{key:t.id,on:{click:function(s){return e.search(1e3,t.name)}}},[e._v(" "+e._s(t.name)+" ")])})),0)]):e._e()]):e._e()])]),s("div",{staticClass:"main container"},[s("ul",{staticClass:"tab"},[s("h2",[e._v("搜索结果")]),s("li",{class:1===e.type?"active":"",on:{click:function(t){return e.changeType(1)}}},[e._v("单曲")]),s("li",{class:100===e.type?"active":"",on:{click:function(t){return e.changeType(100)}}},[e._v("歌手")]),s("li",{class:10===e.type?"active":"",on:{click:function(t){return e.changeType(10)}}},[e._v("专辑")]),s("li",{class:1014===e.type?"active":"",on:{click:function(t){return e.changeType(1014)}}},[e._v("视频")]),s("li",{class:1e3===e.type?"active":"",on:{click:function(t){return e.changeType(1e3)}}},[e._v("歌单")])]),s("div",{directives:[{name:"loading",rawName:"v-loading",value:e.screenLoading,expression:"screenLoading"}],staticClass:"content"},[1===e.type?s("sheet-song-list",{attrs:{songs:e.songs}}):e._e(),100===e.type?s("singer-list",{attrs:{singers:e.singers}}):e._e(),10===e.type?s("album-list",{attrs:{albums:e.albums}}):e._e(),1014===e.type?s("mv-list",{attrs:{mvs:e.videos}}):e._e(),1e3===e.type?s("song-sheet",{attrs:{"sheet-list":e.sheetList}}):e._e(),e.empty?s("pretty-empty",{attrs:{"empty-text":"哎呀，这里什么都没有~"}}):e._e()],1)])])},r=[function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"title flex-row"},[s("i",{staticClass:"iconfont niceyinfu3"}),e._v(" 单曲 ")])},function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"title flex-row"},[s("i",{staticClass:"iconfont niceicon-4"}),e._v("歌手 ")])},function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"title flex-row"},[s("i",{staticClass:"iconfont niceRaidobox-selectedRai1"}),e._v(" 专辑 ")])},function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"title flex-row"},[s("i",{staticClass:"iconfont nicebofangliebiao24",staticStyle:{"font-size":"20px"}}),e._v(" 歌单 ")])}],i=(s("4160"),s("a15b"),s("ac1f"),s("841c"),s("1276"),s("498a"),s("159b"),s("96cf"),s("1da1")),a=s("8c9f"),c=s("88f6"),u=s("7ed9"),o=s("7cf1"),l=s("423d"),h=s("b3e4"),p=s("6d75"),d={name:"search",data:function(){return{keyword:"",searchResult:{},limit:30,offset:0,type:1,songs:[],singers:[],albums:[],videos:[],sheetList:[],screenLoading:!1,timer:null,focus:!1,repeatKeyword:!1,empty:!1}},components:{sheetSongList:a["a"],singerList:c["a"],albumList:u["a"],mvList:o["a"],songSheet:l["a"],prettyEmpty:h["a"]},computed:{isKeyword:function(){return this.keyword.split(" ").join("").length>0&&this.focus}},watch:{keyword:function(e,t){var s=this;""!==t&&(e.trim()!==t.trim()?(this.repeatKeyword=!1,this.timer&&clearTimeout(this.timer),0!==this.keyword.split(" ").join("").length?this.timer=setTimeout((function(){s.searchSuggest(),s.search(s.type)}),100):this.searchResult={}):this.repeatKeyword=!0)}},created:function(){this.$route.query.keyword&&(this.keyword=this.$route.query.keyword,this.search(1))},deactivated:function(){this.focus=!1},methods:{inputFocus:function(){this.focus=!0},cancelInputFocus:function(){this.focus=!1},changeType:function(e){this.type=e,this.search(e)},searchSuggest:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){var s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!e.repeatKeyword){t.next=2;break}return t.abrupt("return");case 2:return t.next=4,e.$api.searchSuggest(e.keyword);case 4:s=t.sent,200===s.code&&(e.searchResult=s.result);case 6:case"end":return t.stop()}}),t)})))()},search:function(e,t){var s=this;return Object(i["a"])(regeneratorRuntime.mark((function n(){var r,i,a,c,u,o;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(e!==s.type||!s.repeatKeyword){n.next=2;break}return n.abrupt("return");case 2:return s.type=e,r={keywords:t||s.keyword,limit:s.limit,offset:s.offset,type:e},n.next=6,s.$api.search(r);case 6:if(i=n.sent,200!==i.code){n.next=34;break}n.t0=e,n.next=1===n.t0?11:100===n.t0?19:10===n.t0?22:1014===n.t0?25:1e3===n.t0?28:31;break;case 11:if(!i.result||!i.result.songs){n.next=17;break}return a=i.result.songs,c=[],a.forEach((function(e){c.push(e.id)})),n.next=17,s.getSongDetail(c);case 17:return s.empty=0===s.songs.length,n.abrupt("break",34);case 19:return i.result&&i.result.artists&&(s.singers=i.result.artists),s.empty=0===s.singers.length,n.abrupt("break",34);case 22:return i.result&&i.result.albums&&(s.albums=i.result.albums),s.empty=0===s.albums.length,n.abrupt("break",34);case 25:return i.result&&i.result.videos&&(s.videos=s._normalizeVideos(i.result.videos)),s.empty=0===s.videos.length,n.abrupt("break",34);case 28:return i.result&&i.result.playlists&&(s.sheetList=i.result.playlists),s.empty=0===s.sheetList.length,n.abrupt("break",34);case 31:return i.result&&i.result.songs&&(u=i.result.songs,o=[],u.forEach((function(e){o.push(e.id)})),s.getSongDetail(o)),s.empty=0===s.songs.length,n.abrupt("break",34);case 34:case"end":return n.stop()}}),n)})))()},getSongDetail:function(e){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function s(){var n,r;return regeneratorRuntime.wrap((function(s){while(1)switch(s.prev=s.next){case 0:return t.screenLoading=!0,n=e.join(","),s.prev=2,s.next=5,t.$api.getSongDetail(n);case 5:r=s.sent,t.songs=t._normalizeSongs(r.songs),t.screenLoading=!1,s.next=13;break;case 10:s.prev=10,s.t0=s["catch"](2),t.screenLoading=!1;case 13:case"end":return s.stop()}}),s,null,[[2,10]])})))()},_normalizeSongs:function(e){var t=[];return e.forEach((function(e){e.id&&t.push(Object(p["a"])(e))})),t},_normalizeVideos:function(e){var t=[];return e.forEach((function(e){e.id&&t.push({id:e.vid,nickName:e.creator.nickname,name:e.title,playCount:e.playTime,duration:e.durationms,image:e.coverUrl,isLive:!1})})),t}}},f=d,m=(s("7e3c"),s("2877")),v=Object(m["a"])(f,n,r,!1,null,"718abd92",null);t["default"]=v.exports},"7e3c":function(e,t,s){"use strict";var n=s("3788"),r=s.n(n);r.a},"7e64":function(e,t,s){"use strict";var n=s("8b09"),r=s.n(n);r.a},"841c":function(e,t,s){"use strict";var n=s("d784"),r=s("825a"),i=s("1d80"),a=s("129f"),c=s("14c3");n("search",1,(function(e,t,s){return[function(t){var s=i(this),n=void 0==t?void 0:t[e];return void 0!==n?n.call(t,s):new RegExp(t)[e](String(s))},function(e){var n=s(t,e,this);if(n.done)return n.value;var i=r(e),u=String(this),o=i.lastIndex;a(o,0)||(i.lastIndex=0);var l=c(i,u);return a(i.lastIndex,o)||(i.lastIndex=o),null===l?-1:l.index}]}))},"8b09":function(e,t,s){}}]);
//# sourceMappingURL=chunk-17de2613.f2bb77e4.js.map